---
milestone: v3.0 JD Builder (PLANNING)
status: requirements_gathering
last_updated: 2026-01-21
session: 39
---

<current_state>
Mid-conversation capturing JD Builder requirements. User explained the matching logic in detail. About to discuss JD Factors and BUILD/CLASSIFY phases. User needs to pause for client demo (using original JobForge, not 2.0).
</current_state>

## JD BUILDER DESIGN (Captured from conversation)

### Three Demo Use Cases

| Use Case | Audience | Status |
|----------|----------|--------|
| **A: Stage Gold** | Data Management Team | v2.0 DONE |
| **B: Job Description Builder** | Managers | DESIGNING NOW |
| **C: Talk to Model (Orbit)** | Everyone | PARTIAL (API done) |

### JD Builder Flow: Two Phases

```
Phase A: BUILD   - Manager creates JD from authoritative universe
Phase B: CLASSIFY - Job Classifier calculates level/group from factors
```

---

## STEP 1: BUILD AUTHORITATIVE UNIVERSE

Manager enters job title → System finds closest matches at each NOC level:

```
Manager input: "Senior Data Analyst"
         │
         ▼
┌────────────────────────────────────────────────┐
│ L7: Example Title Match                        │
│     → "Data analyst" (from element_example_titles)
│                                                │
│ L6: Label + Lead Statement Match               │
│     → Label: "Database analysts..."            │
│     → Lead statement text                      │
│     → L6 Attributes (1:1 via OaSIS code)       │
│                                                │
│ L5: NOC Unit Group                             │
│     → NOC 21211                                │
│     → L5 Attributes (ONLY where L6 has none)   │
└────────────────────────────────────────────────┘

OUTPUT: "Authoritative Universe" - all words that can go in JD
```

**Key principle:** Start at lowest level (L6/L7). Only use L5 attributes for attribute types that don't exist at L6. This maintains provenance to the most specific authoritative source.

---

## STEP 2: DUAL-DIRECTION CORROBORATION

Two concurrent approaches to validate the NOC match:

### Approach A: UPWARD (Find the NOC)

Match TO Job Architecture titles using any/all of:
- Manager's raw input
- L7 example title
- L6 label

Job Arch title → its NOC code

### Approach B: DOWNWARD (Find the Job Titles)

Take Step 1's NOC → Query Job Arch: "What job titles have this NOC?"

Returns list of all Job Arch titles under that NOC.

### Confidence Scoring

- If Approach A NOC == Step 1 NOC → HIGH confidence
- If Approach B returns manager's input → HIGHER confidence
- If Approach A NOC ≠ Step 1 NOC → FLAG: show both options
- Exclusions filter: Remove matches hitting "NOT these titles"

---

## STEP 3: ORGANIZE INTO JD FACTORS (NOT YET DISCUSSED)

Split Authoritative Universe into categories:
- Factors become HEADERS in JD document
- Factors become BLOBS for classification

**TODO: Get list of JD Factor names from user**

---

## QUESTIONS STILL TO ANSWER

1. **What are the JD Factors?** (the headers/categories)
2. **L6 → L5 fallback:** Per-attribute-type? (e.g., L6 Skills but L5 Knowledge)
3. **BUILD phase details:** How does manager select/edit from universe?
4. **CLASSIFY phase details:** What factors feed into classification calculations?
5. **Occupational Group mapping:** When/how does OccGroup get assigned?
6. **Export format:** GC-compliant Word/PDF structure?

---

## DATA SOURCES FOR JD BUILDER

| Table | Role in JD Builder |
|-------|-------------------|
| `element_example_titles` | L7 - Entry point for title matching |
| `element_labels` | L6 - Label matching |
| `element_lead_statement` | L6 - Lead statement text |
| `element_main_duties` | Attribute - Duties factor |
| `element_employment_requirements` | Attribute - Qualifications factor |
| `element_exclusions` | Filter - "NOT these titles" |
| `oasis_skills` | L6 attribute - Skills factor |
| `oasis_abilities` | L6 attribute - Abilities factor |
| `oasis_knowledges` | L6 attribute - Knowledge factor |
| `oasis_workactivities` | L6 attribute - Work activities |
| `oasis_workcontext` | L6 attribute - Work context |
| `job_architecture` | Cross-reference - Job titles + NOC codes |
| `dim_noc` | L5 - NOC definitions |
| `dim_occupations` | TBS Occupational Groups |

---

## RESUME INSTRUCTIONS

When resuming:
1. Remind user we captured JD Builder design through Step 2
2. Ask about JD Factors (Step 3)
3. Ask about BUILD phase UX
4. Ask about CLASSIFY phase logic
5. Then start `/gsd:new-milestone` for v3.0

---

*Captured: 2026-01-21*
*Resume with: /gsd:resume-work*
