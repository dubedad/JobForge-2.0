---
phase: 17-governance-compliance-framework
plan: 01
type: tdd
wave: 1
depends_on: []
files_modified:
  - src/jobforge/governance/policy/__init__.py
  - src/jobforge/governance/policy/models.py
  - src/jobforge/governance/policy/registry.py
  - tests/governance/policy/test_models.py
  - tests/governance/policy/test_registry.py
autonomous: true

must_haves:
  truths:
    - "PolicyClause model stores policy source, version date, clause ID, and full text"
    - "PolicyMapping model links elements to policies with compliance status"
    - "PolicyRegistry provides lookup by source and clause ID"
    - "N/A designations require justification (na_reason field)"
  artifacts:
    - path: "src/jobforge/governance/policy/models.py"
      provides: "PolicySource enum, PolicyClause, PolicyMapping models"
      exports: ["PolicySource", "PolicyClause", "PolicyMapping", "ComplianceStatus", "ElementType"]
    - path: "src/jobforge/governance/policy/registry.py"
      provides: "Policy source registry with clause definitions"
      exports: ["PolicyRegistry", "GC_POLICY_SOURCES"]
    - path: "tests/governance/policy/test_models.py"
      provides: "Unit tests for policy models"
      min_lines: 50
  key_links:
    - from: "src/jobforge/governance/policy/models.py"
      to: "pydantic.BaseModel"
      via: "inheritance"
      pattern: "class.*BaseModel"
---

<objective>
Create the foundational Pydantic models for policy mapping and a registry of GC policy sources.

Purpose: Provides the type-safe foundation for all policy-to-data traceability. Models enforce version dating, clause text storage, and explicit N/A justifications per CONTEXT.md decisions.

Output: PolicySource enum, PolicyClause and PolicyMapping models, PolicyRegistry with 6 GC policy sources.
</objective>

<execution_context>
@C:\Users\Administrator\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Administrator\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/17-governance-compliance-framework/17-CONTEXT.md
@.planning/phases/17-governance-compliance-framework/17-RESEARCH.md
@src/jobforge/governance/compliance/models.py
</context>

<feature>
  <name>Policy Models and Registry</name>
  <files>
    src/jobforge/governance/policy/models.py
    src/jobforge/governance/policy/registry.py
    tests/governance/policy/test_models.py
    tests/governance/policy/test_registry.py
  </files>
  <behavior>
    PolicySource enum with 7 values:
    - TBS_DSD = "TBS Directive on Service and Digital"
    - DAMA_DMBOK = "DAMA DMBOK"
    - ATIP = "Access to Information and Privacy Act"
    - PRIVACY_ACT = "Privacy Act"
    - GC_HR_ERD = "GC HR ERD and Data Dictionary"
    - DADM = "Directive on Automated Decision-Making"
    - AIA = "Algorithmic Impact Assessment"

    ElementType enum:
    - TABLE = "table"
    - COLUMN = "column"
    - RELATIONSHIP = "relationship"

    PolicyClause(BaseModel):
    - policy_source: PolicySource
    - version_date: date (e.g., 2024-04-01)
    - clause_id: str (e.g., "6.1.1", "DAMA-7.3")
    - clause_text: str (full text of clause)
    - url: str | None (deep link to official source)

    PolicyMapping(BaseModel):
    - element_type: ElementType
    - element_path: str (e.g., "dim_noc", "dim_noc.unit_group_id", "dim_noc->cops_employment")
    - primary_policy: PolicyClause
    - secondary_policies: list[PolicyClause] = []
    - compliance_status: ComplianceStatus (reuse from compliance/models.py)
    - compliance_justification: str
    - na_reason: str | None (REQUIRED if status is NOT_APPLICABLE)
    - last_verified: date

    PolicyMapping validation:
    - If compliance_status == NOT_APPLICABLE and na_reason is None: ValidationError

    PolicyRegistry:
    - get_policy_sources() -> list[PolicySource]
    - get_clauses(source: PolicySource) -> list[PolicyClause]
    - get_clause(source: PolicySource, clause_id: str) -> PolicyClause | None
    - search_clauses(text: str) -> list[PolicyClause] (full-text search)

    GC_POLICY_SOURCES: Pre-populated registry with key clauses from:
    - TBS DSD: Sections 6.1-6.6 (data governance, quality, security)
    - DAMA DMBOK: Knowledge areas DAMA-1 through DAMA-11
    - DADM: Sections 6.2 (transparency), 6.3 (quality assurance)
  </behavior>
  <implementation>
    1. Create src/jobforge/governance/policy/ directory with __init__.py
    2. Implement models.py with PolicySource, ElementType, PolicyClause, PolicyMapping
    3. Add validator on PolicyMapping to require na_reason when NOT_APPLICABLE
    4. Implement registry.py with PolicyRegistry class and GC_POLICY_SOURCES constant
    5. Pre-populate registry with key TBS DSD, DAMA, and DADM clauses (15-20 clauses)
    6. Write comprehensive tests for model validation and registry lookups
  </implementation>
</feature>

<verification>
```bash
# Run policy model tests
pytest tests/governance/policy/ -v

# Verify models are importable
python -c "from jobforge.governance.policy.models import PolicySource, PolicyClause, PolicyMapping; print('Models OK')"

# Verify registry is populated
python -c "from jobforge.governance.policy.registry import PolicyRegistry; r = PolicyRegistry(); print(f'Registry has {len(r.get_policy_sources())} sources')"
```
</verification>

<success_criteria>
- PolicySource enum has 7 policy sources
- PolicyClause stores version_date and full clause_text
- PolicyMapping validates na_reason is required when NOT_APPLICABLE
- PolicyRegistry returns clauses for TBS_DSD, DAMA_DMBOK, DADM sources
- All tests pass (expect 15+ tests)
</success_criteria>

<output>
After completion, create `.planning/phases/17-governance-compliance-framework/17-01-SUMMARY.md`
</output>
